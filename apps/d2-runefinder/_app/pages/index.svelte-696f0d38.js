import{S as K,i as N,s as S,A as ne,J as se,e as E,j as B,c as w,a as U,m as J,d as g,b as p,f as z,o as W,I as q,x as M,u as A,v as P,k as F,t as L,n as V,g as $,K as oe,H as _,l as x,r as ee,w as te,h as Q,L as ie,M as X,N as Y,O as Z}from"../chunks/vendor-79e93234.js";function re(n){const e=document.createElement("canvas");e.width=n.width,e.height=n.height;const t=e.getContext("2d");return t.drawImage(n,0,0),t.getImageData(0,0,e.width,e.height)}function ue(n,e,t){let{loaded:r=!1}=e,{userImageUrl:a}=e,{userImage:s}=e,{runeImages:l}=e,i;const o=["amn","ber","cham","dol","el","eld","eth","fal","gul","hel","io","ist","ith","jah","ko","lem","lo","lum","mal","nef","ohm","ort","pul","ral","shael","sol","sur","tal","thul","tir","um","vex","zod"];function c(){o.forEach(u=>{const v=document.createElement("img");v.onload=()=>l.push({image:re(v),name:u}),v.src=`runes/${u}.png`})}return ne(()=>{i=document.createElement("img"),i.onload=()=>t(0,s=re(i)),c()}),n.$$set=u=>{"loaded"in u&&t(1,r=u.loaded),"userImageUrl"in u&&t(2,a=u.userImageUrl),"userImage"in u&&t(0,s=u.userImage),"runeImages"in u&&t(3,l=u.runeImages)},n.$$.update=()=>{n.$$.dirty&9&&t(1,r=l.length===o.length&&s),n.$$.dirty&4&&a&&(i.src=a)},[s,r,a,l]}class ce extends K{constructor(e){super();N(this,e,ue,null,S,{loaded:1,userImageUrl:2,userImage:0,runeImages:3})}}function fe(n){let e,t,r;return t=new se({props:{onaddfile:n[0]}}),{c(){e=E("div"),B(t.$$.fragment),this.h()},l(a){e=w(a,"DIV",{class:!0});var s=U(e);J(t.$$.fragment,s),s.forEach(g),this.h()},h(){p(e,"class","app")},m(a,s){z(a,e,s),W(t,e,null),r=!0},p:q,i(a){r||(M(t.$$.fragment,a),r=!0)},o(a){A(t.$$.fragment,a),r=!1},d(a){a&&g(e),P(t)}}}function de(n,e,t){let{imageUrl:r}=e;function a(s,l){t(1,r=URL.createObjectURL(l.file))}return n.$$set=s=>{"imageUrl"in s&&t(1,r=s.imageUrl)},[a,r]}class me extends K{constructor(e){super();N(this,e,de,fe,S,{imageUrl:1})}}function _e(n){let e,t,r,a,s;return{c(){e=E("img"),r=F(),a=E("h2"),s=L("Finding Runewords..."),this.h()},l(l){e=w(l,"IMG",{alt:!0,src:!0,class:!0}),r=V(l),a=w(l,"H2",{class:!0});var i=U(a);s=$(i,"Finding Runewords..."),i.forEach(g),this.h()},h(){p(e,"alt","loading spinner"),oe(e.src,t="runes/hel.png")||p(e,"src",t),p(e,"class","svelte-douri0"),p(a,"class","svelte-douri0")},m(l,i){z(l,e,i),z(l,r,i),z(l,a,i),_(a,s)},p:q,i:q,o:q,d(l){l&&g(e),l&&g(r),l&&g(a)}}}class ge extends K{constructor(e){super();N(this,e,null,_e,S,{})}}function le(n,e,t){const r=n.slice();return r[5]=e[t].name,r[0]=e[t].runes,r[6]=e[t].link,r[7]=e[t].item_types,r[8]=e[t].level_required,r}function he(n){let e,t;return e=new ge({}),{c(){B(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,a){W(e,r,a),t=!0},p:q,i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){A(e.$$.fragment,r),t=!1},d(r){P(e,r)}}}function ve(n){let e,t,r,a,s,l,i,o,c,u,v,I=n[1],h=[];for(let m=0;m<I.length;m+=1)h[m]=ae(le(n,I,m));return{c(){e=E("table"),t=E("tr"),r=E("th"),a=L("Runeword"),s=E("th"),l=L("Runes"),i=E("th"),o=L("Items"),c=E("th"),u=L("Level"),v=F();for(let m=0;m<h.length;m+=1)h[m].c();this.h()},l(m){e=w(m,"TABLE",{class:!0});var j=U(e);t=w(j,"TR",{});var d=U(t);r=w(d,"TH",{class:!0});var y=U(r);a=$(y,"Runeword"),y.forEach(g),s=w(d,"TH",{class:!0});var H=U(s);l=$(H,"Runes"),H.forEach(g),i=w(d,"TH",{class:!0});var O=U(i);o=$(O,"Items"),O.forEach(g),c=w(d,"TH",{class:!0});var D=U(c);u=$(D,"Level"),D.forEach(g),d.forEach(g),v=V(j);for(let b=0;b<h.length;b+=1)h[b].l(j);j.forEach(g),this.h()},h(){p(r,"class","svelte-4ndbhr"),p(s,"class","svelte-4ndbhr"),p(i,"class","svelte-4ndbhr"),p(c,"class","svelte-4ndbhr"),p(e,"class","svelte-4ndbhr")},m(m,j){z(m,e,j),_(e,t),_(t,r),_(r,a),_(t,s),_(s,l),_(t,i),_(i,o),_(t,c),_(c,u),_(e,v);for(let d=0;d<h.length;d+=1)h[d].m(e,null)},p(m,j){if(j&2){I=m[1];let d;for(d=0;d<I.length;d+=1){const y=le(m,I,d);h[d]?h[d].p(y,j):(h[d]=ae(y),h[d].c(),h[d].m(e,null))}for(;d<h.length;d+=1)h[d].d(1);h.length=I.length}},i:q,o:q,d(m){m&&g(e),ie(h,m)}}}function ae(n){let e,t,r,a=n[5]+"",s,l,i,o,c=Object.keys(n[0]).join(" ")+"",u,v,I,h=n[7].join(", ")+"",m,j,d,y=n[8]+"",H,O;return{c(){e=E("tr"),t=E("td"),r=E("a"),s=L(a),i=F(),o=E("td"),u=L(c),v=F(),I=E("td"),m=L(h),j=F(),d=E("td"),H=L(y),O=F(),this.h()},l(D){e=w(D,"TR",{});var b=U(e);t=w(b,"TD",{class:!0});var T=U(t);r=w(T,"A",{href:!0,target:!0});var G=U(r);s=$(G,a),G.forEach(g),T.forEach(g),i=V(b),o=w(b,"TD",{class:!0});var f=U(o);u=$(f,c),f.forEach(g),v=V(b),I=w(b,"TD",{class:!0});var k=U(I);m=$(k,h),k.forEach(g),j=V(b),d=w(b,"TD",{class:!0});var R=U(d);H=$(R,y),R.forEach(g),O=V(b),b.forEach(g),this.h()},h(){p(r,"href",l=n[6]),p(r,"target","_blank"),p(t,"class","svelte-4ndbhr"),p(o,"class","svelte-4ndbhr"),p(I,"class","svelte-4ndbhr"),p(d,"class","level svelte-4ndbhr")},m(D,b){z(D,e,b),_(e,t),_(t,r),_(r,s),_(e,i),_(e,o),_(o,u),_(e,v),_(e,I),_(I,m),_(e,j),_(e,d),_(d,H),_(e,O)},p(D,b){b&2&&a!==(a=D[5]+"")&&Q(s,a),b&2&&l!==(l=D[6])&&p(r,"href",l),b&2&&c!==(c=Object.keys(D[0]).join(" ")+"")&&Q(u,c),b&2&&h!==(h=D[7].join(", ")+"")&&Q(m,h),b&2&&y!==(y=D[8]+"")&&Q(H,y)},d(D){D&&g(e)}}}function be(n){let e,t,r,a;const s=[ve,he],l=[];function i(o,c){return o[1]?0:1}return e=i(n),t=l[e]=s[e](n),{c(){t.c(),r=x()},l(o){t.l(o),r=x()},m(o,c){l[e].m(o,c),z(o,r,c),a=!0},p(o,[c]){let u=e;e=i(o),e===u?l[e].p(o,c):(ee(),A(l[u],1,1,()=>{l[u]=null}),te(),t=l[e],t?t.p(o,c):(t=l[e]=s[e](o),t.c()),M(t,1),t.m(r.parentNode,r))},i(o){a||(M(t),a=!0)},o(o){A(t),a=!1},d(o){l[e].d(o),o&&g(r)}}}function pe(n,e,t){let{imageData:r}=e,{runes:a}=e,s;const l={image:r,runes:a},i=new Worker("worker.js");return i.postMessage(l),i.onmessage=o=>{t(1,s=o.data)},n.$$set=o=>{"imageData"in o&&t(2,r=o.imageData),"runes"in o&&t(0,a=o.runes)},[a,s,r]}class Ie extends K{constructor(e){super();N(this,e,pe,be,S,{imageData:2,runes:0})}}function ke(n){let e,t,r;function a(l){n[7](l)}let s={};return n[0]!==void 0&&(s.imageUrl=n[0]),e=new me({props:s}),X.push(()=>Y(e,"imageUrl",a)),{c(){B(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,i){W(e,l,i),r=!0},p(l,i){const o={};!t&&i&1&&(t=!0,o.imageUrl=l[0],Z(()=>t=!1)),e.$set(o)},i(l){r||(M(e.$$.fragment,l),r=!0)},o(l){A(e.$$.fragment,l),r=!1},d(l){P(e,l)}}}function Ee(n){let e,t,r;return t=new Ie({props:{imageData:n[1],runes:n[2]}}),{c(){e=E("div"),B(t.$$.fragment),this.h()},l(a){e=w(a,"DIV",{class:!0});var s=U(e);J(t.$$.fragment,s),s.forEach(g),this.h()},h(){p(e,"class","content svelte-18k7j9f")},m(a,s){z(a,e,s),W(t,e,null),r=!0},p(a,s){const l={};s&2&&(l.imageData=a[1]),s&4&&(l.runes=a[2]),t.$set(l)},i(a){r||(M(t.$$.fragment,a),r=!0)},o(a){A(t.$$.fragment,a),r=!1},d(a){a&&g(e),P(t)}}}function we(n){let e,t,r,a,s,l,i,o,c,u,v,I,h,m,j,d;function y(f){n[4](f)}function H(f){n[5](f)}function O(f){n[6](f)}let D={userImageUrl:n[0]};n[3]!==void 0&&(D.loaded=n[3]),n[1]!==void 0&&(D.userImage=n[1]),n[2]!==void 0&&(D.runeImages=n[2]),e=new ce({props:D}),X.push(()=>Y(e,"loaded",y)),X.push(()=>Y(e,"userImage",H)),X.push(()=>Y(e,"runeImages",O));const b=[Ee,ke],T=[];function G(f,k){return f[3]?0:1}return c=G(n),u=T[c]=b[c](n),{c(){B(e.$$.fragment),s=F(),l=E("div"),i=E("div"),o=F(),u.c(),v=F(),I=E("div"),h=L("Made by Ian Kottman \u2014 "),m=E("a"),j=L("GitHub"),this.h()},l(f){J(e.$$.fragment,f),s=V(f),l=w(f,"DIV",{class:!0});var k=U(l);i=w(k,"DIV",{class:!0}),U(i).forEach(g),o=V(k),u.l(k),v=V(k),I=w(k,"DIV",{class:!0});var R=U(I);h=$(R,"Made by Ian Kottman \u2014 "),m=w(R,"A",{target:!0,href:!0});var C=U(m);j=$(C,"GitHub"),C.forEach(g),R.forEach(g),k.forEach(g),this.h()},h(){p(i,"class","header svelte-18k7j9f"),p(m,"target","_blank"),p(m,"href","https://github.com/ikottman/d2-runefinder"),p(I,"class","footer svelte-18k7j9f"),p(l,"class","body svelte-18k7j9f")},m(f,k){W(e,f,k),z(f,s,k),z(f,l,k),_(l,i),_(l,o),T[c].m(l,null),_(l,v),_(l,I),_(I,h),_(I,m),_(m,j),d=!0},p(f,[k]){const R={};k&1&&(R.userImageUrl=f[0]),!t&&k&8&&(t=!0,R.loaded=f[3],Z(()=>t=!1)),!r&&k&2&&(r=!0,R.userImage=f[1],Z(()=>r=!1)),!a&&k&4&&(a=!0,R.runeImages=f[2],Z(()=>a=!1)),e.$set(R);let C=c;c=G(f),c===C?T[c].p(f,k):(ee(),A(T[C],1,1,()=>{T[C]=null}),te(),u=T[c],u?u.p(f,k):(u=T[c]=b[c](f),u.c()),M(u,1),u.m(l,v))},i(f){d||(M(e.$$.fragment,f),M(u),d=!0)},o(f){A(e.$$.fragment,f),A(u),d=!1},d(f){P(e,f),f&&g(s),f&&g(l),T[c].d()}}}function De(n,e,t){let r,a,s=[],l=!1;function i(v){l=v,t(3,l)}function o(v){a=v,t(1,a)}function c(v){s=v,t(2,s)}function u(v){r=v,t(0,r)}return[r,a,s,l,i,o,c,u]}class je extends K{constructor(e){super();N(this,e,De,we,S,{})}}export{je as default};
